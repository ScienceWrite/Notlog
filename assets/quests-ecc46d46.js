import{g as h}from"./init-ce66c3a4.js";var a=(e=>(e.wood="wood",e.forest="forest",e.snow="snow",e.marble="marble",e.stone="stone",e.mud="mud",e.path="path",e.water="water",e.sand="sand",e.ice="ice",e))(a||{});const c={[a.wood]:["wood_01_a.wav","wood_01_b.wav","wood_01_c.wav","wood_01_d.wav"],[a.forest]:["forest_01_a.wav","forest_01_b.wav","forest_01_c.wav","forest_01_d.wav","forest_01_e.wav"],[a.snow]:["snow_01_a.wav","snow_01_b.wav","snow_01_c.wav","snow_01_d.wav"],[a.marble]:["marble_01_a.wav","marble_01_b.wav","marble_01_c.wav","marble_01_d.wav"],[a.mud]:["mud_01_a.wav","mud_01_b.wav","mud_01_c.wav","mud_01_d.wav"],[a.path]:["path_01_a.wav","path_01_b.wav","path_01_c.wav","path_01_d.wav","path_01_e.wav"],[a.stone]:["stone_01_a.wav","stone_01_b.wav","stone_01_c.wav","stone_01_d.wav","stone_01_e.wav"],[a.water]:["water_01_a.wav","water_01_b.wav"],[a.sand]:["sand_01_a.wav","sand_01_b.wav","sand_01_c.wav"],[a.ice]:["ice_01.wav","ice_02.wav","ice_03.wav","ice_04.wav"]},g={volume:.05,loop:!1,rate:1.5,detune:1,delay:0,seek:0,mute:!1};let l,m=[];function I(e){if(!c[e])return;const t=Math.floor(Math.random()*c[e].length);l=WA.sound.loadSound(`https://komponentab.github.io/Avatar-based-scientific-writing/sounds/${c[e][t]}`),l.play(g)}async function f(){var e;try{const t=await h(),u=[];for(const i of t.values())if(i.type==="objectgroup"){for(const s of i.objects)if(s.properties&&s.properties.some(r=>r.name==="stepSound"&&r.value===!0)){const r=(e=s.properties.find(n=>n.name==="material"))==null?void 0:e.value;c[r]&&u.push({name:s.name,x:s.x,y:s.y,width:s.width,height:s.height,material:r})}}return console.log("Found step sound areas:",u),u}catch(t){return console.error("Error while getting step sound areas:",t),[]}}function v(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}async function D(e){try{for(const t of m)if(v(e,t))return t.material;return null}catch(t){return console.error("Error while checking player material:",t),null}}WA.onInit().then(async()=>{m=await f()});async function y(){var e,t,u;try{const i=await h(),s=[];for(const r of i.values())if(r.type==="objectgroup"){for(const n of r.objects)if(n.properties&&n.properties.some(o=>o.name==="isNpc"&&o.value===!0)){const o=(e=n.properties.find(d=>d.name==="chatText"))==null?void 0:e.value,q=(t=n.properties.find(d=>d.name==="npcName"))==null?void 0:t.value,_=((u=n.properties.find(d=>d.name==="triggerQuest"))==null?void 0:u.value)??"";o&&q&&s.push({name:n.name,x:n.x,y:n.y,width:n.width??0,height:n.height??0,chatText:String(o),npcName:String(q),triggerQuest:String(_)})}}return console.log("Found chat areas:",s),s}catch(i){return console.error("Error while getting chat areas:",i),[]}}let w="https://admin.workadventu.re";function p(){const e=WA.player.userRoomToken;if(e===void 0)throw new Error("No userRoomToken found. The quests plugin can only work with WorkAdventure SAAS edition (at https://play.workadventu.re).");return e}async function z(e,t){if(!WA.player.isLogged)throw new Error("You must be logged to gain XP.");const u=new URL(`/api/quests/${e}/level-up`,w),i=await fetch(u,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:p()},body:JSON.stringify({xp:t})});if(!i.ok)throw new Error(`An error occurred. HTTP Code: ${i.status} ${i.statusText}.`);const s=await i.json();return s.awardedBadges.length>0&&(async()=>{for(const r of s.awardedBadges)await b(e,r)})().catch(r=>{console.error(r)}),s}async function b(e,t){const u=new URL(`/quests/${e}/badge/${t}/congratulations`,w);u.search=new URLSearchParams({token:p()}).toString(),await WA.ui.website.open({url:u.toString(),position:{vertical:"middle",horizontal:"middle"},allowApi:!0,visible:!0,size:{width:"100%",height:"100%"}})}const S=[{questId:"quest1",questDescription:"Triff Prof. McDongle am Eingang von Notlog.",requireQuest:null},{questId:"quest2",questDescription:"Sprich mit Prof. Mumblecore am nördlichen Ende der großen Halle.",requireQuest:"quest1"},{questId:"quest3",questDescription:"Geh runter ins Labor und sprich mit Prof. Sake.",requireQuest:"quest2"},{questId:"quest4",questDescription:"Sieh dir das Video im Labor an.",requireQuest:"quest3"},{questId:"quest5",questDescription:"Finde den geheimen Eingang zum Kondensatorium und gib dort den Zahlencode ein.",requireQuest:"quest4"},{questId:"quest6",questDescription:"Gehe durch das Portal ins Kondensatorium.",requireQuest:"quest5"},{questId:"quest7",questDescription:"Sprich mit der zitierenden Zirze.",requireQuest:"quest6"},{questId:"quest8",questDescription:"Geh durch das erste offene Portal und gelange zu deiner ersten Aufgabe. Sprich dort mit der zitierenden Zirze ",requireQuest:"quest7"},{questId:"quest9",questDescription:"Bearbeite das Lernmaterial Planung und Selbstmanagement",requireQuest:"quest8"},{questId:"quest10",questDescription:"Bearbeite das Lernmaterial Themenfindung & Gliederung ",requireQuest:"quest9"},{questId:"quest11",questDescription:"Gebe die Zahlencodes in das Computerterminal ein!",requireQuest:"quest10"},{questId:"quest12a",questDescription:"Geh in den nächsten Raum und sprich mit der zitierenden Zirze",requireQuest:"quest11"},{questId:"quest12",questDescription:"Bearbeite das Lernmaterial zur Literaturrecherche",requireQuest:"quest11"},{questId:"quest13",questDescription:"Bearbeite das Lernmaterial zum wissenschaftlichen Lesen",requireQuest:"quest12"},{questId:"quest14",questDescription:"Gib die Zahlencodes in das Computerterminal ein!",requireQuest:"quest13"},{questId:"quest15",questDescription:"Löse das abschließende Quiz!",requireQuest:"quest14"},{questId:"quest16",questDescription:"Geh durch das Portal zurück zum Knotenpunkt des Kondensatoriums und bearbeite das nächste Lernmodul! ",requireQuest:"quest15"},{questId:"quest17",questDescription:"Bearbeite das Lernmaterial zu den Textarten",requireQuest:"quest16"},{questId:"quest18",questDescription:"Bearbeite das Lernmaterial zu den allgemeinen Regeln",requireQuest:"quest17"},{questId:"quest19",questDescription:"Bearbeite das Lernmaterial zu Sprache & Gendern",requireQuest:"quest18"},{questId:"quest20",questDescription:"Gebe die Zahlencodes in das Computerterminal ein!",requireQuest:"quest19"},{questId:"quest21",questDescription:"Bearbeite das Lernmaterial zu Zitation im Text",requireQuest:"quest20"},{questId:"quest22",questDescription:"Bearbeite das Lernmaterial zum Literaturverzeichnis",requireQuest:"quest21"},{questId:"quest23",questDescription:"Bearbeite das Lernmaterial zur Literaturverwaltung mit Zotero",requireQuest:"quest22"},{questId:"quest24",questDescription:"Gebe die Zahlencodes in das Computerterminal ein!",requireQuest:"quest23"},{questId:"quest25",questDescription:"Löse das abschließende Quiz!",requireQuest:"quest24"},{questId:"quest26",questDescription:"Geh durch das Portal zurück zum Knotenpunkt des Kondensatoriums und gebe dort die gesammelten Wortschnipsel in der korrekten Reihenfolge ein!",requireQuest:"quest25"},{questId:"quest27",questDescription:"Rückkehr in die Notlog. Sprich mit Prof. Mumblecore.",requireQuest:"quest26"}];export{D as c,y as g,z as l,l as m,I as p,S as q};
//# sourceMappingURL=quests-ecc46d46.js.map
